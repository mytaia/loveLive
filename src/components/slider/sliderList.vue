<template>
    <div class="slider-content-wrap">
        <div class='userHeadImgWrap'>
            <img class='userHeadImg' :src="userInfo.avatarUrl" alt="用户头像">
            <div class='user-name'>{{userInfo.userName}}</div>
        </div>
        <ul>
            <li class="sidebar-item" @click='toFixInfo'>
                <div class='wrapper-sidebar-svg'>
                    <svg viewBox="0 0 1329 1024"><path d="M1204.14781 14.461937l-1079.600005 0C55.826239 14.461937 0 74.185236 0 147.772046l0 729.786552c0 73.586811 55.708256 133.305244 124.547806 133.305244L1204.14781 1010.863842c68.721567 0 124.547806-59.718434 124.547806-133.305244l0-729.786552C1328.695616 74.185236 1272.869377 14.461937 1204.14781 14.461937L1204.14781 14.461937 1204.14781 14.461937 1204.14781 14.461937zM1272.137158 877.558598c0 31.135127-25.542529 73.462747-56.919702 73.462747L113.725071 951.021345c-31.50002 0-56.924567-42.328836-56.924567-73.462747L56.800504 147.647983c0-31.139992 25.542529-71.396235 56.924567-71.396235l1101.493601 0c31.50002 0 56.919702 40.256243 56.919702 71.396235L1272.138374 877.558598 1272.137158 877.558598 1272.137158 877.558598 1272.137158 877.558598zM1078.017584 293.605293l-225.01752 0c-12.529219 0-22.743798 9.364378-22.743798 21.043395l0 17.270399c0 11.679017 10.214579 21.043395 22.743798 21.043395l225.01752 0c12.647201 0 22.743798-9.364378 22.743798-21.043395l0-17.270399C1100.761382 302.969671 1090.546803 293.605293 1078.017584 293.605293L1078.017584 293.605293 1078.017584 293.605293 1078.017584 293.605293zM1078.017584 484.082015l-225.01752 0c-12.529219 0-22.743798 9.364378-22.743798 21.037314l0 15.085904c0 11.674152 10.214579 21.043395 22.743798 21.043395l225.01752 0c12.647201 0 22.743798-9.369243 22.743798-21.043395l0-15.085904C1100.761382 493.446393 1090.546803 484.082015 1078.017584 484.082015L1078.017584 484.082015 1078.017584 484.082015 1078.017584 484.082015zM1078.017584 671.877989l-225.01752 0c-12.529219 0-22.743798 9.488441-22.743798 21.043395l0 13.74553c0 11.674152 10.214579 21.03853 22.743798 21.03853l225.01752 0c12.647201 0 22.743798-9.364378 22.743798-21.03853l0-13.74553C1100.761382 681.36643 1090.546803 671.877989 1078.017584 671.877989L1078.017584 671.877989 1078.017584 671.877989 1078.017584 671.877989zM434.589108 324.745285c56.558458 0 102.536227 45.971688 102.536227 102.530145 0 27.366996-13.627548 55.224165-37.463593 76.509606-20.06913 18.002618-28.217197 45.853705-20.43524 71.638281 7.781957 25.666593 29.557572 44.519412 56.074366 48.168345 2.308558 0.36611 29.799618 5.10729 55.218083 18.002618 11.797 5.957491 20.919332 12.647201 26.392731 19.214064 4.865244 5.839509 5.839509 10.338643 5.839509 15.32795l0 26.75884L246.302961 702.895134l0-26.634777c0-5.112155 0-18.733621 31.990193-34.788925 25.300483-12.771265 52.543415-17.270399 54.851974-17.636508 26.75884-3.524869 48.534455-22.259706 56.558458-48.044281 8.030085-25.784575-0.117982-53.88379-20.311176-71.886408-23.836045-21.285441-37.463593-49.136529-37.463593-76.503524C332.052881 370.841036 378.03065 324.745285 434.589108 324.745285M432.522596 271.345587c-89.038825 0-161.161197 72.128454-161.161197 161.161197 0 47.802235 23.718063 90.739227 56.800504 120.296799 0 0-137.325152 19.336911-137.325152 113.47816l0 60.696348c0 13.863512 11.194926 25.053572 25.058438 25.053572l433.248733 0c13.869593 0 25.058438-11.188844 25.058438-25.053572l0-60.696348c0-93.166984-137.325152-113.47816-137.325152-113.47816 33.088522-29.557572 56.806585-72.494563 56.806585-120.296799C593.683792 343.474041 521.555339 271.345587 432.522596 271.345587L432.522596 271.345587 432.522596 271.345587 432.522596 271.345587 432.522596 271.345587zM432.522596 271.345587" p-id="1517" fill="#707070"></path></svg>    
                </div>
                <span>完善信息</span>  
            </li>
            <li class="sidebar-item">
                <div class='wrapper-sidebar-svg'>
                    <svg viewBox="0 0 1024 1024"><path d="M949.248 772.096l-91.136-164.864c-21.504-38.912-61.44-62.464-105.472-63.488-45.056 0-84.992 21.504-107.52 60.416-19.456 32.768-53.248 52.224-91.136 52.224H552.96c-37.888 0-71.68-19.456-91.136-52.224L329.728 380.928c-9.216-16.384-25.6-25.6-44.032-25.6-18.432 0-34.816 10.24-44.032 25.6L76.8 671.744l-50.176-28.672 164.864-289.792c19.456-34.816 55.296-55.296 94.208-55.296 39.936-1.024 75.776 19.456 95.232 54.272L509.952 573.44c9.216 15.36 24.576 23.552 41.984 23.552 17.408 0 32.768-9.216 41.984-23.552 33.792-56.32 93.184-89.088 158.72-88.064 65.536 1.024 123.904 35.84 155.648 93.184l91.136 164.864-50.176 28.672z" fill="#707070" p-id="2175"></path><path d="M882.688 844.8H138.24c-64.512 0-116.736-52.224-116.736-116.736V234.496c0-64.512 52.224-116.736 116.736-116.736h744.448c64.512 0 116.736 52.224 116.736 116.736v493.568c0 64.512-52.224 116.736-116.736 116.736zM138.24 176.128c-31.744 0-58.368 26.624-58.368 58.368v493.568c0 31.744 26.624 58.368 58.368 58.368h744.448c31.744 0 58.368-26.624 58.368-58.368V234.496c0-31.744-26.624-58.368-58.368-58.368H138.24z" fill="#707070" p-id="2176"></path><path d="M775.168 413.696c-54.272 0-98.304-44.032-98.304-98.304s44.032-98.304 98.304-98.304 98.304 44.032 98.304 98.304-44.032 98.304-98.304 98.304z m0-139.264c-22.528 0-40.96 18.432-40.96 40.96s18.432 40.96 40.96 40.96 40.96-18.432 40.96-40.96-18.432-40.96-40.96-40.96z" fill="#707070" p-id="2177"></path></svg>
                </div>
                <span>相册 开发中</span>  
            </li>
            <li class="sidebar-item"  @click='goToCheckNewMsgs'>
                <div class='wrapper-sidebar-svg'>
                    <svg viewBox="0 0 1024 1024" ><path d="M798.408 569.848v-88.407c0-124.764-89.85-229.568-211.378-259.101v-1.493c0-41.949-31.487-75.954-70.328-75.954-38.838 0-70.328 34.004-70.328 75.954v1.733c-121.026 29.856-210.392 134.428-210.392 258.856v72.751h-0.059c1.453 89.798-70.493 107.41-70.493 155.882s39.292 67.386 87.767 67.386h122.755c1.714 58.393 64.233 105.335 141.109 105.335s139.395-46.938 141.109-105.335h122.438c48.475 0 87.771-18.91 87.771-67.386 0.005-45.503-63.661-64.015-69.969-140.22zM517.151 847.314c-58.389 0-105.722-30.723-105.722-68.625 0-0.413 0.010-0.825 0.026-1.239h211.395c0.010 0.413 0.026 0.822 0.026 1.239-0.005 37.901-47.336 68.625-105.727 68.625zM833.375 712.797c-2.197 22.761-32.25 30.008-51.159 30.008h-530.469c-14.482 1.97-51.705-5.107-51.156-29.513v-6.198c0.483-22.037 54.625-40.822 70.179-118.866v-34.038h-0.557v-66.675c0-119.753 91.718-218.82 211.063-235.378v-29.628c0-23.405 15.775-42.378 35.235-42.378s35.235 18.973 35.235 42.378v29.588c119.477 16.445 211.34 115.569 211.34 235.419v66.674h-0.205v30.694h0.273c0.712 56.066 69.668 102.662 70.217 119.522l0.005 8.391z" fill="#333333" p-id="3285"></path></svg>
                    <div class='new-msg-red-point' v-show='getNewMsgsLen != 0 || getNewReplysLen != 0'></div>
                </div>
                <span>消息</span>  
            </li>
            <li class="sidebar-item">
                <div class='wrapper-sidebar-svg'>
                    <svg viewBox="0 0 1024 1024"><path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m0 947.2C273.066667 947.2 76.8 750.933333 76.8 512S273.066667 76.8 512 76.8 947.2 273.066667 947.2 512 750.933333 947.2 512 947.2z m98.133333-298.666667c-12.8 0-59.733333 72.533333-89.6 72.533334-8.533333 0-8.533333-4.266667-8.533333-12.8 0-12.8 8.533333-34.133333 17.066667-46.933334l64-166.4c29.866667-81.066667-8.533333-102.4-46.933334-102.4-51.2 0-98.133333 25.6-132.266666 55.466667-12.8 12.8-38.4 55.466667-38.4 68.266667 0 4.266667 4.266667 12.8 12.8 12.8 17.066667 0 46.933333-81.066667 81.066666-81.066667 8.533333 0 17.066667 8.533333 8.533334 21.333333l-64 149.333334c-4.266667 12.8-38.4 64-38.4 102.4 0 34.133333 21.333333 68.266667 55.466666 68.266666 89.6 0 192-106.666667 192-128-4.266667-8.533333-8.533333-12.8-12.8-12.8z m-17.066666-413.866666c-38.4 0-72.533333 29.866667-72.533334 68.266666 0 34.133333 25.6 59.733333 59.733334 59.733334 38.4 0 72.533333-29.866667 72.533333-68.266667 0-38.4-25.6-59.733333-59.733333-59.733333z" p-id="2908" fill="#707070"></path></svg>    
                </div>
                <span>关于loveLive</span>  
            </li>
            <li class="sidebar-item" @click='handSignout'>
                <div class='wrapper-sidebar-svg'>
                    <svg viewBox="0 0 1024 1024"><path d="M959.488 512L704 256.448V448H448v128h256v191.552L959.488 512zM192 192h512V128H128v768h576v-64H192V192z" fill="#707070" p-id="3189"></path></svg>
                </div>
                <span>退出登陆</span>  
            </li>
        </ul>
        <alert v-show='isShowModel' @closeMd='closeMd' :message='signOutMessage'></alert>
    </div>
</template>

<script>

    import { signout } from '../../getData/getData.js'
    import { setCookie } from '../../utils/utils.js'
    import { mapMutations, mapGetters } from 'vuex'
    export default{
        data(){
            return {
                isShowModel: false,
                signOutMessage: '登出失败'
            }
        },
        computed: {
            ...mapGetters(['getNewMsgsLen', 'getNewReplysLen']),
            userInfo(){
                return this.$store.state.userInfo;
            }
        },

        methods:{
            ...mapMutations(['SIGN_OUT', 'RESET_SOCKET']),
            toFixInfo () {
                this.$router.push('./fixInfo')
            },
            handSignout (){
                signout().then((val)=>{
                    var message = val.data.message;
                    if ( message === '登出成功' ){
                        this.signOutMessage = message;
                        this.isShowModel = true;
                        setCookie('connect.sid', '', -1);
                        this.$store.commit('SIGN_OUT');
                        this.RESET_SOCKET();
                        this.$router.push('./login');
                    }
                })
            },
            closeMd(){
                this.isShowModel = false
            },
            goToCheckNewMsgs(){
                this.$router.push('./checkNewMsgs')
            }
        }
    }

</script>

<style>
    .slider-content-wrap{
        width: 60%;
        background-color: #fafafa;
        position: fixed;
        top: 0;
        bottom: 0;
        z-index: 100;
    }
    .userHeadImgWrap{
        padding: 20px 20px 20px 20px;
    }
    .userHeadImg{
        width: 7rem;
        height: 7rem;
        border-radius: 50%;
    }
    .user-name{
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        font-size: 3.4rem;
    }

    .sidebar-item{
        height: 40px;
        margin: 5px 0px;
        text-indent: 1.5em;
        line-height: 40px;
    }

    .sidebar-item *{
        vertical-align: middle;
    }
    .sidebar-item svg{
        position: absolute;
        top: 0;
        left: 0;
        height: 25px;
        width: 25px;
    }
    .wrapper-sidebar-svg{
        position: relative;
        height: 25px;
        width: 25px;
        text-indent: 0; /* 不手动清除，会继承父亲的 text-indent */
        display: inline-block;
    }

</style>